{% extends 'base.html' %}
{% load static %}
{% block title %}Home{% endblock %}

{% block content %}
<div class="header" style="margin-left:64px; margin-right:64px;">
    <h1>Home</h1>
</div>
<div class="main-layout">
    <div class="left-column">
        {% if error_message %}
            <div class="alert">
                ⚠️ <strong>{{ error_message }}</strong>
                <p class="hint-text">
                    To generate rolling summaries with AGP data, ensure the daily summary task is running.
                </p>
            </div>
        {% elif summary %}
            <div class="chart-container" style="margin-left:64px; margin-right:64px;">
                <div id="homeChart"></div>
            </div>

            {% if plotly_graph %}
                <script id="plotly-data" type="application/json">
                    {{ plotly_graph|safe }}
                </script>
            {% else %}
                <div class="no-data-message">
                    No AGP graph data available for this period.
                </div>
            {% endif %}
        {% else %}
            <p class="no-data-message">
                No AGP data available. Please ensure rolling summaries are calculated.
            </p>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'home/js/render_plotly.js' %}"></script>
{% endblock %}
